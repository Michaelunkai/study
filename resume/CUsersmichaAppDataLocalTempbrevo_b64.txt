aW1wb3J0IG9zCmZyb20gc3RyaW5nIGltcG9ydCBUZW1wbGF0ZSAgIyBCdWls
dC1pbiwgbm8gaW5zdGFsbCBuZWVkZWQKCmltcG9ydCBicmV2b19weXRob24K
ZnJvbSBicmV2b19weXRob24ucmVzdCBpbXBvcnQgQXBpRXhjZXB0aW9uCgoj
IFRvIHNlY3VyZWx5IGxvYWQgeW91ciBBUEkga2V5IGZyb20gZW52aXJvbm1l
bnQgdmFyaWFibGVzCnRyeToKICAgIGltcG9ydCBzY3JpcHRzLmNvbmZpZyBh
cyBjb25maWcKICAgIGZyb20gc2NyaXB0cy5sb2dnaW5nX2NvbmZpZyBpbXBv
cnQgZ2V0X2xvZ2dlcgpleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBpbXBvcnQg
Y29uZmlnCiAgICBmcm9tIGxvZ2dpbmdfY29uZmlnIGltcG9ydCBnZXRfbG9n
Z2VyCgojIENvbmZpZ3VyZSBBUEkga2V5IGF1dGhvcml6YXRpb246ICdhcGkt
a2V5Jwpjb25maWd1cmF0aW9uID0gYnJldm9fcHl0aG9uLkNvbmZpZ3VyYXRp
b24oKQojIEl0J3MgYmVzdCBwcmFjdGljZSB0byBzdG9yZSB5b3VyIEFQSSBr
ZXkgaW4gYW4gZW52aXJvbm1lbnQgdmFyaWFibGUgZm9yIHNlY3VyaXR5Lgoj
IGNvbmZpZ3VyYXRpb24uYXBpX2tleVsnYXBpLWtleSddID0gInhrZXlzaWIt
OWM4YWM4NDIyOTI2ZjAxOWY4OWNjNDhjNTg3ODE4OGFhYTI3MjI2MjdkMjJh
NWU2M2YwNmNiYzE2NmUxMDU2YS1oOEtZQzA4RmRsQ3E0TnljIgpjb25maWd1
cmF0aW9uLmFwaV9rZXlbImFwaS1rZXkiXSA9IGNvbmZpZy5CUkVWT19NQUlM
X0FQSV9LRVkKIyBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIEFQSSBjbGFz
cwphcGlfaW5zdGFuY2UgPSBicmV2b19weXRob24uVHJhbnNhY3Rpb25hbEVt
YWlsc0FwaSgKICAgIGJyZXZvX3B5dGhvbi5BcGlDbGllbnQoY29uZmlndXJh
dGlvbikKKQoKbG9nZ2VyID0gZ2V0X2xvZ2dlcihfX25hbWVfXykKCgpkZWYg
cGFyc2VfaHRtbF9jb2RlKHRvOiBsaXN0W2RpY3RdLCB2YWx1ZXM6IGRpY3Qp
IC0+IHN0cjoKICAgICIiIgogICAgVGhpcyBmdW5jdGlvbiB0YWtlcyBhIGxp
c3Qgb2YgcmVjaXBpZW50IGVtYWlscyBhbmQgYSBkaWN0aW9uYXJ5IG9mIHZh
bHVlcwogICAgYW5kIHJldHVybnMgYSBmdWxseSBjb25zdHJ1Y3RlZCBIVE1M
IHN0cmluZyBmb3IgYW4gZW1haWwgbm90aWZpY2F0aW9uLgoKICAgIFRoZSBm
dW5jdGlvbiBpcyBkaXZpZGVkIGludG8gZm91ciBzdGVwczoKCiAgICAxLiBF
eHRyYWN0IHJlbGV2YW50IGluZm9ybWF0aW9uIGZyb20gdGhlIGlucHV0IHBh
cmFtZXRlcnMKICAgIDIuIENvbnN0cnVjdCB0aGUgc3RyZW5ndGhzIGFuZCB3
ZWFrbmVzc2VzIEhUTUwgYmxvY2tzCiAgICAzLiBMb2FkIHRoZSBlbWFpbCB0
ZW1wbGF0ZSBmcm9tIGEgZmlsZQogICAgNC4gU3Vic3RpdHV0ZSB0aGUgcmVs
ZXZhbnQgaW5mb3JtYXRpb24gaW50byB0aGUgdGVtcGxhdGUKCiAgICBUaGUg
ZnVuY3Rpb24gcmV0dXJucyB0aGUgZnVsbHkgY29uc3RydWN0ZWQgSFRNTCBz
dHJpbmcgb3IgIlRlbXBsYXRlIEVycm9yIgogICAgaWYgdGhlIHRlbXBsYXRl
IGZpbGUgaXMgbm90IGZvdW5kLgoKICAgIDpwYXJhbSB0bzogQSBsaXN0IG9m
IGRpY3Rpb25hcmllcyBjb250YWluaW5nIHRoZSByZWNpcGllbnQgZW1haWwg
YWRkcmVzc2VzCiAgICA6cGFyYW0gdmFsdWVzOiBBIGRpY3Rpb25hcnkgY29u
dGFpbmluZyB0aGUgdmFsdWVzIHRvIGJlIHN1YnN0aXR1dGVkIGludG8gdGhl
IHRlbXBsYXRlCiAgICA6cmV0dXJuOiBBIGZ1bGx5IGNvbnN0cnVjdGVkIEhU
TUwgc3RyaW5nIG9yICJUZW1wbGF0ZSBFcnJvciIKICAgICIiIgogICAgIyAx
LiDXlNeb16DXqiDXlNec15nXoNen15nXnQogICAgZW1haWxfYWRkcmVzcyA9
IHRvWzBdWyJlbWFpbCJdCiAgICB1bnN1YnNjcmliZV9saW5rID0gKAogICAg
ICAgIGYiaHR0cHM6Ly9hbGVydHMucHl0aGlhLW1hdGNoLmNvbS91bnN1YnNj
cmliZT9lbWFpbD17ZW1haWxfYWRkcmVzc30iCiAgICApCiAgICBzaXRlX2xp
bmsgPSBmImh0dHBzOi8vYXBwLnRvdnRlY2gub3JnL3VzZXIvbWF0Y2hlcz9j
b21wYW55X25hbWU9e3ZhbHVlc1snY29tcGFueSddfSZqb2JfaWQ9e3ZhbHVl
c1snam9iX2lkX3NpdGUnXX0iCgogICAgIyAyLiDXlNeb16DXqiDXqNep15nX
nteV16ogKFN0cmVuZ3Rocy9XZWFrbmVzc2VzKSDXmy1IVE1MCiAgICAjINeR
157Xp9eV150g15QtcmVkdWNlINeU157XodeV16jXkdecLCDXoNep16rXntep
INeRLWpvaW4g16TXqdeV15gKICAgIHN0cmVuZ3Roc19odG1sID0gIiIuam9p
bihbZiI8bGk+e3N9PC9saT4iIGZvciBzIGluIHZhbHVlcy5nZXQoInN0cmVu
Z3RocyIsIFtdKV0pCiAgICB3ZWFrbmVzc2VzX2h0bWwgPSAiIi5qb2luKFtm
IjxsaT57d308L2xpPiIgZm9yIHcgaW4gdmFsdWVzLmdldCgid2Vla25lc3Nl
cyIsIFtdKV0pCgogICAgIyAzLiDXp9eo15nXkNeqINen15XXkdelINeULUhU
TUwKICAgICMgR2V0IHRoZSBkaXJlY3Rvcnkgd2hlcmUgVEhJUyBzY3JpcHQg
aXMgbG9jYXRlZAogICAgY3VycmVudF9kaXIgPSBvcy5wYXRoLmRpcm5hbWUo
b3MucGF0aC5hYnNwYXRoKF9fZmlsZV9fKSkKCiAgICAjIENvbnN0cnVjdCB0
aGUgZnVsbCBwYXRoIHRvIHRoZSB0ZW1wbGF0ZSBmaWxlCiAgICB0ZW1wbGF0
ZV9wYXRoID0gb3MucGF0aC5qb2luKGN1cnJlbnRfZGlyLCAiZW1haWxfdGVt
cGxhdGUuaHRtbCIpCiAgICB0cnk6CiAgICAgICAgd2l0aCBvcGVuKHRlbXBs
YXRlX3BhdGgsICJyIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAg
ICAgICAgdGVtcGxhdGVfY29udGVudCA9IFRlbXBsYXRlKGYucmVhZCgpKQog
ICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgogICAgICAgIGxvZ2dlci5l
cnJvcigiVGVtcGxhdGUgZmlsZSBub3QgZm91bmQhIikKICAgICAgICByZXR1
cm4gIlRlbXBsYXRlIEVycm9yIgoKICAgICMgNC4g15TXlteo16fXqiDXlNeg
16rXldeg15nXnSDXnNeq15XXmiDXlC1UZW1wbGF0ZQogICAgIyDXkNeg15fX
oNeVINee16nXqtee16nXmdedINeRLS5mb3JtYXQoKSDXldee16LXkdeZ16jX
mdedINeQ16og15vXnCDXlNee16nXqteg15nXnQogICAgIyBVc2Ugc2FmZV9z
dWJzdGl0dXRlIHRvIGF2b2lkIGNyYXNoaW5nIGlmIGEgdmFyaWFibGUgaXMg
bWlzc2luZwogICAgZnVsbF9odG1sID0gdGVtcGxhdGVfY29udGVudC5zYWZl
X3N1YnN0aXR1dGUoCiAgICAgICAgY2FuZGlkYXRlX25hbWU9dmFsdWVzLmdl
dCgiY2FuZGlkYXRlX25hbWUiLCAiQ2FuZGlkYXRlIiksCiAgICAgICAgc2Nv
cmU9dmFsdWVzLmdldCgic2NvcmUiLCAiMCIpLAogICAgICAgIGpvYl90aXRs
ZT12YWx1ZXMuZ2V0KCJqb2JfdGl0bGUiLCAiTi9BIiksCiAgICAgICAgY29t
cGFueT12YWx1ZXMuZ2V0KCJjb21wYW55IiwgIk4vQSIpLAogICAgICAgIG1h
bmRhdG9yeV9yZXE9IlllcyIgaWYgdmFsdWVzLmdldCgibWFuZGF0b3J5X3Jl
cSIpIGVsc2UgIk5vIiwKICAgICAgICBtYW5kYXRvcnlfc2NvcmU9dmFsdWVz
LmdldCgibWFuZGF0b3J5X3Njb3JlIiwgMCksCiAgICAgICAgYWR2YW50YWdl
X3Njb3JlPXZhbHVlcy5nZXQoImFkdmFudGFnZV9zY29yZSIsIDApLAogICAg
ICAgIHNvZnRfY29tcGF0aWJpbGl0eT12YWx1ZXMuZ2V0KCJzb2Z0X2NvbXBh
dGliaWxpdHkiLCAwKSwKICAgICAgICB0ZWNoX2NvbXBhdGliaWxpdHk9dmFs
dWVzLmdldCgidGVjaF9jb21wYXRpYmlsaXR5IiwgMCksCiAgICAgICAgcGFz
dF9jb21wYXRpYmlsaXR5PXZhbHVlcy5nZXQoInBhc3RfY29tcGF0aWJpbGl0
eSIsIDApLAogICAgICAgIHN0cmVuZ3Roc19odG1sPXN0cmVuZ3Roc19odG1s
LAogICAgICAgIHdlYWtuZXNzZXNfaHRtbD13ZWFrbmVzc2VzX2h0bWwsCiAg
ICAgICAgY292ZXJfbGV0dGVyPXZhbHVlcy5nZXQoImNvdmVyX2xldHRlciIs
ICIiKSwKICAgICAgICBoaXJpbmdfcmVjb21tZW5kPXZhbHVlcy5nZXQoImhp
cmluZ19yZWNvbW1lbmQiLCAiIiksCiAgICAgICAgbG9jYXRpb249dmFsdWVz
LmdldCgibG9jYXRpb24iLCAiTm90IHNwZWNpZmllZCIpLAogICAgICAgIGpv
Yl9saW5rPXZhbHVlcy5nZXQoImxpbmsiLCAiIyIpLAogICAgICAgIHNpdGVf
bGluaz1zaXRlX2xpbmssCiAgICAgICAgdW5zdWJzY3JpYmVfbGluaz11bnN1
YnNjcmliZV9saW5rLAogICAgKQoKICAgIHJldHVybiBmdWxsX2h0bWwKCgpk
ZWYgc2VuZF9icmV2b19tYWlsKAogICAgdG86IGxpc3RbZGljdF0sIHNlbmRl
cjogZGljdCwgc3ViamVjdDogc3RyLCBodG1sX2RhdGE6IGRpY3QKKSAtPiBi
b29sOgogICAgIiIiCiAgICBTZW5kcyBhIHRyYW5zYWN0aW9uYWwgZW1haWwg
dmlhIEJyZXZvIEFQSS4KCiAgICBBcmdzOgogICAgICAgIHRvIChsaXN0W2Rp
Y3RdKTogUmVjaXBpZW50cyBsaXN0LgogICAgICAgICAgICBFeGFtcGxlOiBb
eyJlbWFpbCI6ICJ1c2VyQGNsaWVudC5jb20iLCAibmFtZSI6ICJKb2huIERv
ZSJ9XQoKICAgICAgICBzZW5kZXIgKGRpY3QpOiBWZXJpZmllZCBzZW5kZXIg
aWRlbnRpdHkuCiAgICAgICAgICAgIEV4YW1wbGU6IHsiZW1haWwiOiAiYWxl
cnRzQHRvdnRlY2gub3JnIiwgIm5hbWUiOiAiVG92VGVjaCBQeXRoaWEifQoK
ICAgICAgICBzdWJqZWN0IChzdHIpOiBFbWFpbCBzdWJqZWN0IGxpbmUuCgog
ICAgICAgIGh0bWxfZGF0YSAoZGljdCk6IERpY3Rpb25hcnkgb2YgdmFsdWVz
IHRvIGluamVjdCBpbnRvIHRoZSBIVE1MIHRlbXBsYXRlLgogICAgICAgICAg
ICBFeGFtcGxlOiB7ImNhbmRpZGF0ZV9uYW1lIjogIkFsaWNlIiwgInNjb3Jl
IjogODV9CiAgICAiIiIKICAgIF9odG1sX2NvbnRlbnQgPSBwYXJzZV9odG1s
X2NvZGUodG89dG8sIHZhbHVlcz1odG1sX2RhdGEpCiAgICBzZW5kX3NtdHBf
ZW1haWwgPSBicmV2b19weXRob24uU2VuZFNtdHBFbWFpbCgKICAgICAgICB0
bz10bywgc2VuZGVyPXNlbmRlciwgc3ViamVjdD1zdWJqZWN0LCBodG1sX2Nv
bnRlbnQ9X2h0bWxfY29udGVudAogICAgKQoKICAgIHRyeToKICAgICAgICBh
cGlfcmVzcG9uc2UgPSBhcGlfaW5zdGFuY2Uuc2VuZF90cmFuc2FjX2VtYWls
KHNlbmRfc210cF9lbWFpbCkKICAgICAgICBsb2dnZXIuaW5mbyhhcGlfcmVz
cG9uc2UpCiAgICAgICAgbG9nZ2VyLnN1Y2Nlc3MoIkVtYWlsIHNlbnQgc3Vj
Y2Vzc2Z1bGx5ISIpCiAgICAgICAgcmV0dXJuIFRydWUKICAgIGV4Y2VwdCBB
cGlFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dnZXIuZXJyb3IoCiAgICAg
ICAgICAgIGYiRXhjZXB0aW9uIHdoZW4gY2FsbGluZyBUcmFuc2FjdGlvbmFs
RW1haWxzQXBpLT5zZW5kX3RyYW5zYWNfZW1haWw6IHtlfVxuIgogICAgICAg
ICkKICAgICAgICByZXR1cm4gRmFsc2UKCgppZiBfX25hbWVfXyA9PSAiX19t
YWluX18iOgogICAgIyBzZW5kX3RvX21haWwgPSAic3RhcjY5OTk1QGdtYWls
LmNvbSIKICAgIHNlbmRfdG9fbWFpbCA9ICJleGFtcGxlQGV4YW1wbGUub3Jn
IgoKICAgIGxvZ2dlci5pbmZvKCJCcmV2b21haWwgdGVzdCIpCiAgICBzZW5k
X2JyZXZvX21haWwoCiAgICAgICAgdG89W3siZW1haWwiOiBzZW5kX3RvX21h
aWx9XSwKICAgICAgICBzZW5kZXI9ewogICAgICAgICAgICAibmFtZSI6ICJU
b3ZUZWNoICIsCiAgICAgICAgICAgICJlbWFpbCI6ICJzdXBwb3J0QHRvdnRl
Y2gub3JnIiwKICAgICAgICB9LAogICAgICAgIHN1YmplY3Q9IlRlc3QiLAog
ICAgICAgIGh0bWxfZGF0YT17CiAgICAgICAgICAgICJjYW5kaWRhdGVfbmFt
ZSI6ICJUZXN0IiwKICAgICAgICAgICAgInNjb3JlIjogMTAwLAogICAgICAg
ICAgICAiam9iX3RpdGxlIjogIlRlc3QiLAogICAgICAgICAgICAiY29tcGFu
eSI6ICJUZXN0IiwKICAgICAgICAgICAgIm1hbmRhdG9yeV9yZXEiOiBUcnVl
LAogICAgICAgICAgICAibWFuZGF0b3J5X3Njb3JlIjogMTAwLAogICAgICAg
ICAgICAiYWR2YW50YWdlX3Njb3JlIjogMTAwLAogICAgICAgICAgICAic29m
dF9jb21wYXRpYmlsaXR5IjogMTAwLAogICAgICAgICAgICAidGVjaF9jb21w
YXRpYmlsaXR5IjogMTAwLAogICAgICAgICAgICAicGFzdF9jb21wYXRpYmls
aXR5IjogMTAwLAogICAgICAgICAgICAic3RyZW5ndGhzIjogWyJUZXN0Il0s
CiAgICAgICAgICAgICJ3ZWVrbmVzc2VzIjogWyJUZXN0Il0sCiAgICAgICAg
ICAgICJjb3Zlcl9sZXR0ZXIiOiAiVGVzdCIsCiAgICAgICAgICAgICJoaXJp
bmdfcmVjb21tZW5kIjogIlRlc3QiLAogICAgICAgICAgICAibG9jYXRpb24i
OiAiVGVzdCIsCiAgICAgICAgICAgICJsaW5rIjogIlRlc3QiLAogICAgICAg
ICAgICAiam9iX2lkX3NpdGUiOiAiVGVzdCIsCiAgICAgICAgfSwKICAgICkK

