export DEBIAN_FRONTEND=noninteractive && sudo apt-get update -qq 2>/dev/null || (sudo rm -f /var/lib/apt/lists/lock && sudo rm -f /var/cache/apt/archives/lock && sudo rm -f /var/lib/dpkg/lock* && sudo dpkg --configure -a && sudo apt-get update -qq) && sudo apt-get install -y -qq apt-transport-https ca-certificates curl gnupg lsb-release software-properties-common && sudo install -m 0755 -d /etc/apt/keyrings && sudo rm -f /etc/apt/keyrings/docker.gpg && (curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor --yes -o /etc/apt/keyrings/docker.gpg || (sleep 2 && curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor --yes -o /etc/apt/keyrings/docker.gpg)) && sudo chmod a+r /etc/apt/keyrings/docker.gpg && echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null && sudo apt-get update -qq && sudo apt-get install -y -qq docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras && sudo usermod -aG docker $USER && (sudo service docker start 2>/dev/null || sudo /etc/init.d/docker start 2>/dev/null || sudo dockerd > /dev/null 2>&1 &) && sleep 3 && sg docker -c "docker run --rm hello-world 2>&1 | grep -q 'Hello from Docker' && echo 'âœ… Docker installed and verified successfully!' || echo 'âš ï¸ Docker installed but verification pending - run: docker run hello-world'" && echo "âœ¨ Setup complete! Activate docker group with: exec su -l $USER"

